html, body { height: 100%; width: 100%; overflow-x: hidden; }
:root { --header-height: 160px; }
* { box-sizing: border-box; }
*::before, *::after { box-sizing: inherit; }

body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  /* Cinematic layered background (keeps original dark tone) */
  background:
    radial-gradient(60% 80% at 50% -10%, rgba(255, 216, 128, 0.06), rgba(0,0,0,0) 60%),
    radial-gradient(70% 60% at 85% 0%, rgba(64, 156, 255, 0.08), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #0e0e0e 0%, #111 35%, #0d0d0d 100%);
  background-attachment: fixed;
}

/* Wrapper used for uniform scaling to fit the viewport while preserving ratios */
#ui-wrap {
  position: absolute;
  top: 0; left: 0;
  transform-origin: top left;
  will-change: transform, left, top;
  /* fixed logical size matches JS BASE_WIDTH/BASE_HEIGHT */
  width: 1280px;
  height: 720px;
  overflow: visible;
}

/* Ensure the document doesn't introduce scrollbars when ui-wrap is scaled down */
html, body { overflow: hidden; }

/* Theatrical title styling — golden, shiny, projector-like */
.app-title {
  font-family: 'Cinzel', Georgia, serif;
  font-weight: 800;
  font-size: clamp(22px, 4.5vw, 40px);
  line-height: 1;
  display: inline-block;
  text-transform: uppercase;
  letter-spacing: 2px;
  /* gold gradient (highlights + shadow) */
  background: linear-gradient(180deg,
    #fff6d6 0%,
    #ffd54f 18%,
    #ffb300 45%,
    #b58a00 62%,
    #6b4000 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  position: relative;
  /* slightly softened shadows to reduce overall glare */
  text-shadow:
    0 1px 0 rgba(255,255,255,0.12),
    0 4px 10px rgba(0,0,0,0.45);
}

/* moving projector shine */
.app-title::after {
  content: '';
  position: absolute;
  top: -10%;
  left: -60%;
  /* narrower, subtler shine */
  width: 40%;
  height: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.6) 50%, rgba(255,255,255,0) 100%);
  transform: skewX(-25deg);
  filter: blur(4px);
  opacity: 0;
  pointer-events: none;
  animation: title-shine 6s linear infinite;
}

@keyframes title-shine {
  0% { left: -60%; opacity: 0; }
  10% { opacity: 0.5; }
  50% { left: 120%; opacity: 0.0; }
  100% { left: 120%; opacity: 0; }
}

.top-bar {
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #181818;
  display: flex;
  align-items: center;
  padding: 18px 24px;
  min-height: var(--header-height);
  z-index: 1000;
  box-shadow: 0 2px 8px rgba(0,0,0,0.55);
  overflow: hidden; /* clip header-stills to header area */
}

/* Header stills: subtle background images behind the top bar */
.header-stills {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: var(--header-height);
  width: 100%; /* use 100% instead of 100vw */
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}
.header-stills .stills-img {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100%; height: 100%; object-fit: cover; object-position: center center; opacity: 0; transition: opacity 1.2s ease-in-out, transform 10s linear;
  filter: brightness(0.55) saturate(0.9) contrast(0.95);
  transform-origin: center center; display: block; margin: 0 auto;
}
.header-stills .stills-img.visible { opacity: 0.28; transform: scale(1.03); }

#btn-stills-config { margin-left: 12px; padding: 6px 10px; font-size: 16px; }
.header-inner { position: relative; z-index: 2; }

/* Make sure top-bar remains visible in fullscreen and looks like tabs */
body.fullscreen .top-bar { position: fixed; }
.top-bar .hub-button { background: transparent; color: #ddd; border: 1px solid rgba(255,255,255,0.06); }
.top-bar .media-button { border-radius: 8px; padding: 8px; min-width: 96px; }

/* Center header content nicely on wide screens */
.header-inner { max-width: 1100px; margin: 0 auto; width: 100%; display: flex; align-items: center; justify-content: center; }

.top-bar button {
  border: none;
  background: none;
  cursor: pointer;
  padding: 6px;
  border-radius: 10px;
  transition: all 0.25s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Stack icon above label for centered look */
.media-button { flex-direction: column; gap: 6px; padding: 10px 12px; }


.top-bar button .logo,
.media-button .logo {
  display: block;
  height: 48px; /* explicit pixel height for consistent rendering */
  width: auto;
  max-height: 64px;
  transition: transform 220ms cubic-bezier(.2,.9,.2,1), filter 220ms ease;
}
.media-button .label { color: #fff; font-weight: 600; font-size: 12px; text-align: center; }

.top-bar button:hover .logo {
  transform: translateY(-4px) scale(1.08);
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.45));
}

.hub-button {
  background-color: #555;
  color: white;
  padding: 10px 20px;
  font-size: 18px;
}

.media-button.netflix { background-color: #E50914; }
.media-button.youtube { background-color: #FF0000; }
.media-button.prime { background-color: #007ea8; } /* friendlier teal */
.media-button.disney { background-color: #1057a8; } /* friendlier blue */
/* Jellyfin: warm orange to match Jellyfin branding */
.media-button.jellyfin { background-color: #ff8c00; }
/* Apple TV */
.media-button.appletv { background: linear-gradient(180deg,#0f0f0f,#222); color: #fff; }
.media-button.appletv .logo { height: 48px; width: auto; max-height: 64px; }

webview#webview {
  position: absolute;
  top: var(--header-height);
  left: 0;
  width: 100%;
  height: calc(100% - var(--header-height));
}

top-bar button .logo,
.media-button .logo {
  display: block;
  transition: transform 220ms cubic-bezier(.2,.9,.2,1), filter 220ms ease;
  /* explicit sizing for consistent rendering */
  height: 48px;
  width: auto;
  max-height: 64px;
}
#main { min-height: 100vh; }
#hub { color: #eee; padding: 20px 20px; max-width: 1100px; margin: 0 auto; position: relative; min-height: calc(100vh - 120px); }
#viewer { position: absolute; top: var(--header-height); left: 0; width: 100%; height: calc(100% - var(--header-height)); border: none; }

.media-button img { height: 48px; width: auto; max-height: 64px; }
/* Hub grid */
.hub-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: clamp(16px, 2.5vw, 28px); margin-top: 24px; align-items: stretch; }
.media-button { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; height: 120px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.06); box-shadow: inset 0 -8px 18px rgba(0,0,0,0.35); }
.media-button { position: relative; isolation: isolate; overflow: hidden; transition: transform 220ms cubic-bezier(.2,.9,.2,1), box-shadow 220ms ease, filter 220ms ease; }
.media-button:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 18px 30px rgba(0,0,0,0.6); filter: saturate(1.05) contrast(1.02); }
.media-button:active { transform: translateY(-2px) scale(0.99); box-shadow: 0 10px 20px rgba(0,0,0,0.55); }

/* Subtle soft-light highlight on cards for depth */
.media-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(120% 60% at 50% -20%, rgba(255,255,255,0.12), rgba(255,255,255,0) 60%);
  mix-blend-mode: soft-light;
  pointer-events: none;
  opacity: 0.7;
}

/* Quick sheen on hover */
.media-button::after {
  content: '';
  position: absolute;
  top: -120%; left: -40%;
  width: 80%; height: 240%;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.28) 45%, rgba(255,255,255,0) 100%);
  transform: skewX(-25deg);
  filter: blur(8px);
  opacity: 0;
  transition: opacity 0.3s ease, transform 0.8s ease;
}
.media-button:hover::after { opacity: 1; transform: translateX(180%) skewX(-25deg); }
.media-button img { height: 48px; width: auto; }
.media-button .label { margin-top: 8px; font-size: 14px; }

/* Better readability for hub heading/paragraph */
#hub h1 { margin: 0 0 6px; font-size: clamp(22px, 3.5vw, 34px); letter-spacing: 0.5px; color: #f2f2f2; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
#hub p { margin: 0 0 18px; color: #cfcfcf; opacity: 0.9; }

/* Control bar */
.control-bar { display: flex; flex-wrap: wrap; gap: 16px; align-items: stretch; justify-content: space-between; margin: 20px 0 10px; }
.search-stack { display: flex; flex-direction: column; gap: 10px; flex: 1 1 580px; min-width: 260px; }
.search-row { display: flex; gap: 10px; }
#global-search { flex: 1; padding: 12px 14px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.06); color: #f3f3f3; outline: none; box-shadow: inset 0 -4px 10px rgba(0,0,0,0.35); }
#global-search::placeholder { color: #bdbdbd; }
.action { background: rgba(255,255,255,0.1); color: #f7f7f7; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 10px 14px; cursor: pointer; transition: transform .2s ease, box-shadow .2s ease, background .2s ease; }
.action:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.35); }
.action.primary { background: linear-gradient(180deg, #ffd54f 0%, #ffb300 60%, #b58a00 100%); color: #1a1a1a; }
.ghost { background: transparent; border: 1px solid rgba(255,255,255,0.1); color: #dcdcdc; border-radius: 10px; padding: 10px 14px; cursor: pointer; }
.chip-group { display: flex; gap: 8px; flex-wrap: wrap; }
.chip { background: rgba(255,255,255,0.08); color: #eaeaea; border: 1px solid rgba(255,255,255,0.08); border-radius: 999px; padding: 8px 12px; cursor: pointer; font-size: 12px; }
.chip.selected { background: #ffd54f; color: #1a1a1a; border-color: #ffb300; }
.quick-actions { display: flex; gap: 10px; align-items: center; }
.help-text { margin: -2px 0 6px; color: #cfcfcf; opacity: .7; font-size: 12px; }

/* Recents */
.recent { display: none; gap: 8px; margin: 8px 0 16px; overflow: hidden; white-space: nowrap; display: flex; flex-wrap: nowrap; align-items: center; }
.recent-label { display: none; margin-top: 8px; margin-bottom: 6px; color: #e4e4e4; opacity: .9; font-weight: 600; font-size: 12px; letter-spacing: .4px; }
.pill { background: rgba(255,255,255,0.07); color: #eaeaea; border: 1px solid rgba(255,255,255,0.08); padding: 6px 10px; border-radius: 999px; cursor: pointer; font-size: 12px; display: inline-flex; flex: 0 0 auto; margin-right: 8px; }
.pill:hover { background: rgba(255,255,255,0.12); }

/* subtle fade on the right edge to indicate hidden older items */
.recent::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: 56px;
  pointer-events: none;
  background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(16,16,16,0.6) 100%);
}

/* Favorites */
.favorites-section { margin-top: 28px; }
.favorites-section h2 { margin: 0 0 10px; font-size: 18px; font-weight: 700; letter-spacing: .3px; color: #f0f0f0; }
.section-head { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 8px; }
.fav-form { display: grid; grid-template-columns: 1fr 2fr auto auto; gap: 10px; margin-bottom: 12px; }
.fav-form input { padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.06); color: #f3f3f3; }
.fav-form .form-actions { display: contents; }
.favorites-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: clamp(12px, 2vw, 18px); }
.favorite-card { position: relative; min-height: 120px; }
.favorite-card .avatar { width: 44px; height: 44px; border-radius: 50%; background: rgba(255,255,255,0.18); display: grid; place-items: center; font-weight: 700; color: #111; margin-bottom: 6px; }
.favorite-card .mini.delete { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.35); color: #fff; border: none; border-radius: 8px; padding: 2px 8px; cursor: pointer; }

/* Render PNG images as white icons so logos are monochrome */
img[src$=".png"],
.media-button img.logo {
  /* convert PNG logos to white: desaturate then boost brightness */
  filter: grayscale(1) brightness(3) saturate(0) !important;
  /* ensure the image stays crisp */
  image-rendering: -webkit-optimize-contrast;
}

/* SVG handling: try to render all SVGs as white.
   - Inline SVG elements can be recolored by setting fill/stroke to white.
   - External SVGs loaded via <img>, <object> or <embed> are rasterized by the UA
     so we use a filter fallback to make them appear white.
*/
/* Inline SVGs (direct <svg> in DOM) — only target logo svgs inside media buttons */
.media-button svg.logo,
.media-button svg.logo * {
  fill: #ffffff !important;
  stroke: #ffffff !important;
  color: #ffffff !important;
}

/* Size inline SVG logos consistently */
.media-button svg.logo {
  height: 48px; /* match PNG sizing */
  width: auto;
  max-height: 64px;
  max-width: 72%; /* prevent very wide logos from overflowing their card */
  display: block;
}

/* YouTube SVG can have a different intrinsic viewBox; ensure it scales down nicely */
.media-button.youtube svg.logo { height: 44px; max-width: 68%; }

/* External SVG files rendered via <img> or with .logo class */
img[src$=".svg"], .media-button img[src$=".svg"] {
  /* use a filter to force a white appearance for rasterized SVGs */
  filter: grayscale(1) brightness(3) saturate(0) !important;
  image-rendering: -webkit-optimize-contrast;
}

/* <object> or <embed> fallbacks (may not recolor internal SVGs if cross-origin) */
object[type="image/svg+xml"], embed[type="image/svg+xml"] {
  filter: grayscale(1) brightness(3) saturate(0) !important;
}

/* Vignette glow behind the hub for a cinematic feel */
#hub::before {
  content: '';
  position: absolute;
  inset: -10% -5% -5% -5%;
  background: radial-gradient(60% 40% at 50% 0%, rgba(255, 210, 120, 0.06), rgba(0,0,0,0) 70%),
              radial-gradient(100% 60% at 50% 100%, rgba(16, 87, 168, 0.08), rgba(0,0,0,0) 70%);
  pointer-events: none;
  z-index: 0;
}

/* Keep content above the decorative layer */
#hub > * { position: relative; z-index: 1; }
